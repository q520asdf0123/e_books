    <select id="getTotalAmountByRoleIds" resultType="java.lang.Integer">
        SELECT IFNULL(SUM(amount), 0) as totalAmount
        FROM u_pay
        WHERE roleId IN
        <foreach collection="roleIds" item="roleId" open="(" close=")" separator=",">
            #{roleId}
        </foreach>
        AND state = 1
        AND payTime &gt;= #{startTime}
        AND payTime &lt;= #{endTime}
    </select>
